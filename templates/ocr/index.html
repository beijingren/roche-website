{% extends 'roche/base.html' %}
{% load i18n %}
{% load static %}

{% block content %}

<div class="container" style="margin-top: 60px;">
<h1>Optical Character Recognition Service</h1>

<p>
Drop tiff files here for now (we plan to expand the upload form to accept other file types and links).
You will be redirected to a page containing the ocr text and your corresponding images.
</p>

<form class="dropzone" action="/en/ocr/" method="post" enctype="multipart/form-data">
            {% csrf_token %}
</form>
<button id="submit-all">
            Submit all files
</button>
 
<script src="{% static 'js/dropzone.js' %}"></script>
<script type="text/javascript">
            Dropzone.options.myDropzone = {
 
                // Prevents Dropzone from uploading dropped files immediately
                autoProcessQueue : false,
 
                init : function() {
                    var submitButton = document.querySelector("#submit-all")
                    myDropzone = this;
 
                    submitButton.addEventListener("click", function() {
                        myDropzone.processQueue();
                        // Tell Dropzone to process all queued files.
                    });
 
                    // You might want to show the submit button only when
                    // files are dropped here:
                    this.on("addedfile", function() {
                        // Show submit button here and/or inform user to click it.
                    });
 
                }
            };
        </script>
</div>

{% endblock %}
